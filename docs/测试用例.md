# 时间记录小程序 - 测试用例文档

## 文档信息
- **项目名称**：时间记录小程序（TimeRecord）
- **文档版本**：v1.0
- **创建日期**：2025-11-03
- **测试环境**：微信小程序开发者工具 + 真机测试

---

## 一、登录模块

### 1.1 用户登录

| 用例ID | 测试项 | 前置条件 | 测试步骤 | 期望结果 | 优先级 |
|--------|--------|----------|----------|----------|--------|
| TC_LOGIN_001 | 首次登录 | 用户未登录 | 1. 打开小程序<br>2. 自动跳转到登录页 | 1. 显示登录页<br>2. 显示头像选择和昵称输入框 | P0 |
| TC_LOGIN_002 | 选择头像 | 在登录页 | 1. 点击头像按钮<br>2. 选择头像 | 1. 弹出头像选择器<br>2. 头像正确显示 | P0 |
| TC_LOGIN_003 | 输入昵称 | 在登录页 | 1. 点击昵称输入框<br>2. 输入昵称"测试用户" | 昵称正确显示 | P0 |
| TC_LOGIN_004 | 昵称为空登录 | 在登录页 | 1. 不输入昵称<br>2. 点击登录 | 提示"请输入昵称" | P0 |
| TC_LOGIN_005 | 昵称长度限制 | 在登录页 | 输入超过20个字符的昵称 | 只能输入前20个字符 | P1 |
| TC_LOGIN_006 | 成功登录 | 已选择头像和昵称 | 点击登录按钮 | 1. 保存用户信息到数据库<br>2. 跳转到首页 | P0 |
| TC_LOGIN_007 | 已登录用户 | 用户已登录 | 关闭小程序后重新打开 | 直接进入首页，不跳转登录页 | P0 |

### 1.2 退出登录

| 用例ID | 测试项 | 前置条件 | 测试步骤 | 期望结果 | 优先级 |
|--------|--------|----------|----------|----------|--------|
| TC_LOGOUT_001 | 退出登录 | 用户已登录 | 1. 进入设置页<br>2. 点击"退出登录"<br>3. 确认退出 | 1. 清除用户信息<br>2. 跳转到登录页 | P0 |
| TC_LOGOUT_002 | 取消退出 | 用户已登录 | 1. 进入设置页<br>2. 点击"退出登录"<br>3. 取消退出 | 保持在设置页，不退出 | P1 |

---

## 二、首页模块

### 2.1 时间显示

| 用例ID | 测试项 | 前置条件 | 测试步骤 | 期望结果 | 优先级 |
|--------|--------|----------|----------|----------|--------|
| TC_HOME_001 | 实时时间显示 | 进入首页 | 观察时间显示 | 1. 显示当前时:分:秒<br>2. 每秒自动更新 | P0 |
| TC_HOME_002 | 日期显示 | 进入首页 | 查看日期 | 显示"年月日 星期X"格式 | P0 |

### 2.2 今日待办卡片

| 用例ID | 测试项 | 前置条件 | 测试步骤 | 期望结果 | 优先级 |
|--------|--------|----------|----------|----------|--------|
| TC_HOME_003 | 无待办显示 | 今日无待办 | 进入首页 | 不显示今日待办卡片 | P1 |
| TC_HOME_004 | 有待办显示 | 今日有待办 | 进入首页 | 1. 显示"今日待办"卡片<br>2. 显示待办数量 | P0 |
| TC_HOME_005 | 展开待办列表 | 今日有待办 | 点击待办卡片 | 展开显示前3条待办 | P1 |
| TC_HOME_006 | 收起待办列表 | 待办列表已展开 | 再次点击卡片 | 收起待办列表 | P1 |
| TC_HOME_007 | 快速完成待办 | 待办列表已展开 | 点击待办右侧的勾选按钮 | 1. 待办标记为已完成<br>2. 显示删除线<br>3. 刷新列表 | P0 |
| TC_HOME_008 | 查看全部待办 | 今日有待办 | 点击"查看全部" | 跳转到备忘录列表页 | P1 |
| TC_HOME_009 | 编辑待办 | 待办列表已展开 | 点击某条待办 | 跳转到备忘录编辑页 | P1 |

### 2.3 录音功能

| 用例ID | 测试项 | 前置条件 | 测试步骤 | 期望结果 | 优先级 |
|--------|--------|----------|----------|----------|--------|
| TC_HOME_010 | 开始录音 | 在首页 | 点击录音按钮 | 1. 请求录音权限<br>2. 按钮变色并显示动画<br>3. 显示"正在录音..." | P0 |
| TC_HOME_011 | 拒绝录音权限 | 未授权录音 | 点击录音按钮 | 1. 提示需要录音权限<br>2. 提供"去设置"选项 | P0 |
| TC_HOME_012 | 停止录音 | 正在录音中 | 再次点击录音按钮 | 1. 停止录音<br>2. 显示"上传录音中..." | P0 |
| TC_HOME_013 | 录音上传成功 | 录音已停止 | 等待上传 | 1. 显示"正在识别语音..."<br>2. 跳转到编辑页 | P0 |
| TC_HOME_014 | 录音上传失败 | 网络异常 | 录音后上传 | 1. 提示上传失败<br>2. 询问是否继续编辑 | P1 |
| TC_HOME_015 | 语音识别成功 | 录音上传成功 | 等待识别 | 1. 跳转到编辑页<br>2. 内容框自动填入识别文字 | P0 |
| TC_HOME_016 | 语音识别失败 | 识别服务异常 | 等待识别 | 1. 提示识别失败<br>2. 跳转到编辑页但内容为空 | P1 |
| TC_HOME_017 | 录音时长限制 | 正在录音 | 录音超过60秒 | 自动停止录音并上传 | P1 |

### 2.4 最近记录

| 用例ID | 测试项 | 前置条件 | 测试步骤 | 期望结果 | 优先级 |
|--------|--------|----------|----------|----------|--------|
| TC_HOME_018 | 无记录显示 | 无任何记录 | 进入首页 | 显示"点击上方按钮开始记录" | P1 |
| TC_HOME_019 | 有记录显示 | 有历史记录 | 进入首页 | 显示最近3条记录 | P0 |
| TC_HOME_020 | 记录时间显示 | 有记录 | 查看记录 | 显示"开始时间 - 结束时间"格式 | P1 |
| TC_HOME_021 | 记录内容显示 | 有记录 | 查看记录 | 内容最多显示2行，超出显示省略号 | P1 |
| TC_HOME_022 | 记录标签显示 | 记录有标签 | 查看记录 | 显示标签图标和名称，带颜色 | P1 |
| TC_HOME_023 | 点击记录详情 | 有记录 | 点击某条记录 | 跳转到日视图页面 | P1 |

---

## 三、编辑日记模块

### 3.1 新建日记

| 用例ID | 测试项 | 前置条件 | 测试步骤 | 期望结果 | 优先级 |
|--------|--------|----------|----------|----------|--------|
| TC_EDIT_001 | 从录音进入 | 录音完成 | 自动跳转 | 1. 显示识别的文字<br>2. 开始时间为录音时间 | P0 |
| TC_EDIT_002 | 默认开始时间 | 新建日记 | 查看开始时间 | 默认为当前时间（HH:MM） | P0 |
| TC_EDIT_003 | 修改开始时间 | 在编辑页 | 点击开始时间选择器 | 1. 弹出时间选择器<br>2. 只能选择时:分，不能选日期 | P0 |
| TC_EDIT_004 | 设置结束时间 | 在编辑页 | 点击结束时间选择器 | 1. 弹出时间选择器<br>2. 只能选择时:分 | P0 |
| TC_EDIT_005 | 结束时间早于开始时间 | 在编辑页 | 设置结束时间早于开始时间 | 提示"结束时间不能早于开始时间" | P0 |
| TC_EDIT_006 | 跨天时间处理 | 在编辑页 | 1. 开始时间23:00<br>2. 结束时间01:00 | 系统自动判定为第二天01:00 | P0 |
| TC_EDIT_007 | 清除结束时间 | 已设置结束时间 | 点击"清除结束时间" | 1. 弹出确认框<br>2. 确认后清除结束时间 | P1 |
| TC_EDIT_008 | 输入内容 | 在编辑页 | 输入日记内容 | 1. 正确显示输入内容<br>2. 显示字符计数（X/500） | P0 |
| TC_EDIT_009 | 内容长度限制 | 在编辑页 | 输入超过500字 | 只能输入前500个字符 | P1 |
| TC_EDIT_010 | 选择标签 | 在编辑页 | 点击快速标签 | 标签高亮，再次点击取消选择 | P0 |
| TC_EDIT_011 | 查看更多标签 | 在编辑页 | 点击"更多" | 1. 弹出标签选择器<br>2. 显示所有标签 | P1 |
| TC_EDIT_012 | 在弹窗中选择标签 | 标签弹窗打开 | 选择多个标签后点击确定 | 1. 弹窗关闭<br>2. 选中的标签在主界面显示 | P1 |
| TC_EDIT_013 | 使用模板 | 在编辑页 | 点击某个模板 | 1. 弹出确认框<br>2. 确认后内容替换为模板内容 | P1 |
| TC_EDIT_014 | 播放录音 | 有录音的日记 | 点击播放按钮 | 1. 播放录音<br>2. 按钮显示为暂停图标 | P1 |
| TC_EDIT_015 | 内容为空保存 | 在编辑页 | 内容为空时点击保存 | 提示"请输入日记内容" | P0 |
| TC_EDIT_016 | 未选时间保存 | 在编辑页 | 未选开始时间点击保存 | 提示"请选择开始时间" | P0 |
| TC_EDIT_017 | 成功保存 | 填写完整信息 | 点击保存 | 1. 显示"保存成功"<br>2. 返回上一页 | P0 |
| TC_EDIT_018 | 取消编辑 | 在编辑页 | 点击取消 | 1. 弹出确认框<br>2. 确认后返回上一页 | P1 |

### 3.2 编辑已有日记

| 用例ID | 测试项 | 前置条件 | 测试步骤 | 期望结果 | 优先级 |
|--------|--------|----------|----------|----------|--------|
| TC_EDIT_019 | 加载日记数据 | 有历史记录 | 点击某条记录进入编辑 | 1. 显示原内容<br>2. 显示原时间<br>3. 显示原标签 | P0 |
| TC_EDIT_020 | 编辑内容 | 编辑模式 | 修改日记内容 | 内容正确更新 | P0 |
| TC_EDIT_021 | 修改开始时间 | 编辑模式 | 修改开始时间 | 1. 时间正确更新<br>2. **日期保持不变** | P0 |
| TC_EDIT_022 | 修改结束时间 | 编辑模式 | 修改结束时间 | 1. 时间正确更新<br>2. **基于开始时间的日期** | P0 |
| TC_EDIT_023 | 编辑昨天的记录 | 有昨天的记录 | 1. 今天编辑昨天的记录<br>2. 修改时间<br>3. 保存 | 1. 记录保持在**昨天的日期**<br>2. 只有时间被修改 | P0 |
| TC_EDIT_024 | 修改标签 | 编辑模式 | 修改标签后保存 | 标签正确更新 | P0 |
| TC_EDIT_025 | 更新成功 | 编辑模式 | 点击保存 | 1. 显示"更新成功"<br>2. updateTime更新<br>3. 返回上一页 | P0 |

---

## 四、日视图模块

### 4.1 日期切换

| 用例ID | 测试项 | 前置条件 | 测试步骤 | 期望结果 | 优先级 |
|--------|--------|----------|----------|----------|--------|
| TC_DAILY_001 | 默认显示今天 | 进入日视图 | 查看日期 | 显示"今天"和当前日期 | P0 |
| TC_DAILY_002 | 切换到昨天 | 在日视图 | 点击左箭头 | 1. 日期减一天<br>2. 加载昨天的记录 | P0 |
| TC_DAILY_003 | 切换到明天 | 在日视图 | 点击右箭头 | 日期加一天（不超过今天） | P0 |
| TC_DAILY_004 | 不能查看未来 | 查看今天 | 点击右箭头 | 提示"不能查看未来" | P1 |
| TC_DAILY_005 | 日期选择器 | 在日视图 | 点击日期 | 弹出日期选择器 | P1 |
| TC_DAILY_006 | 选择特定日期 | 日期选择器打开 | 选择某个日期 | 跳转到该日期并加载数据 | P1 |
| TC_DAILY_007 | 下拉刷新 | 在日视图 | 下拉刷新 | 重新加载当前日期数据 | P1 |

### 4.2 记录显示

| 用例ID | 测试项 | 前置条件 | 测试步骤 | 期望结果 | 优先级 |
|--------|--------|----------|----------|----------|--------|
| TC_DAILY_008 | 无记录显示 | 当天无记录 | 查看日视图 | 显示"今天还没有记录" | P1 |
| TC_DAILY_009 | 显示当天记录 | 当天有记录 | 查看日视图 | **只显示startTime为当天的记录** | P0 |
| TC_DAILY_010 | 编辑后的记录归属 | 昨天有记录 | 1. 今天编辑昨天的记录<br>2. 查看昨天的日视图 | 记录仍显示在**昨天的日视图**中 | P0 |
| TC_DAILY_011 | 今天编辑不影响 | 昨天有记录 | 1. 今天编辑昨天的记录<br>2. 查看今天的日视图 | 今天的日视图**不显示**昨天的记录 | P0 |
| TC_DAILY_012 | 记录按时间排序 | 当天有多条记录 | 查看记录列表 | 按startTime从早到晚排序 | P0 |
| TC_DAILY_013 | 跨天记录显示 | 有23:00-次日01:00的记录 | 查看今天日视图 | 1. endTime显示为23:59<br>2. 时长后有"+"标记 | P1 |

### 4.3 统计数据

| 用例ID | 测试项 | 前置条件 | 测试步骤 | 期望结果 | 优先级 |
|--------|--------|----------|----------|----------|--------|
| TC_DAILY_014 | 记录数统计 | 当天有记录 | 查看统计卡片 | 显示正确的记录条数 | P0 |
| TC_DAILY_015 | 总时长统计 | 当天有记录 | 查看统计卡片 | 显示总时长（小时） | P0 |
| TC_DAILY_016 | 标签时长分布 | 记录有标签 | 查看柱状图 | 1. 显示各标签的时长<br>2. 按时长降序排列 | P1 |
| TC_DAILY_017 | 时间记录表格 | 当天有记录 | 查看表格 | 显示时间段、内容、时长、标签 | P1 |
| TC_DAILY_018 | 时间轴显示 | 当天有记录 | 查看时间轴 | 1. 按时间顺序显示<br>2. 有时间线连接 | P1 |

### 4.4 每日总结

| 用例ID | 测试项 | 前置条件 | 测试步骤 | 期望结果 | 优先级 |
|--------|--------|----------|----------|----------|--------|
| TC_DAILY_019 | 无总结显示 | 当天无总结 | 查看总结区域 | 显示"写下今天的收获和思考..." | P1 |
| TC_DAILY_020 | 输入总结 | 在日视图 | 点击输入框输入总结 | 正确显示输入内容 | P1 |
| TC_DAILY_021 | 总结字数限制 | 在日视图 | 输入超过500字 | 只能输入前500字，显示字数统计 | P1 |
| TC_DAILY_022 | 自动保存总结 | 输入总结 | 输入框失焦 | 自动保存到数据库 | P1 |
| TC_DAILY_023 | 加载已有总结 | 某天有总结 | 查看该天日视图 | 显示已保存的总结内容 | P1 |

### 4.5 编辑记录

| 用例ID | 测试项 | 前置条件 | 测试步骤 | 期望结果 | 优先级 |
|--------|--------|----------|----------|----------|--------|
| TC_DAILY_024 | 点击记录编辑 | 在日视图 | 点击某条记录 | 跳转到编辑页 | P0 |
| TC_DAILY_025 | 播放录音 | 记录有录音 | 点击播放按钮 | 播放录音 | P1 |

---

## 五、备忘录模块

### 5.1 备忘录列表

| 用例ID | 测试项 | 前置条件 | 测试步骤 | 期望结果 | 优先级 |
|--------|--------|----------|----------|----------|--------|
| TC_MEMO_001 | 无备忘录显示 | 无任何备忘录 | 进入备忘录列表 | 显示空状态提示 | P1 |
| TC_MEMO_002 | 时间分组显示 | 有多条备忘录 | 查看列表 | 按"今天/明天/本周/未来"分组 | P0 |
| TC_MEMO_003 | 筛选未完成 | 有备忘录 | 点击"未完成"筛选 | 只显示未完成的备忘录 | P0 |
| TC_MEMO_004 | 筛选已完成 | 有备忘录 | 点击"已完成"筛选 | 只显示已完成的备忘录 | P0 |
| TC_MEMO_005 | 查看全部 | 有备忘录 | 点击"全部"筛选 | 显示所有备忘录 | P0 |
| TC_MEMO_006 | 下拉刷新 | 在列表页 | 下拉刷新 | 重新加载数据 | P1 |
| TC_MEMO_007 | 备忘录排序 | 有多条备忘录 | 查看列表 | 按提醒时间升序排列 | P1 |

### 5.2 创建备忘录

| 用例ID | 测试项 | 前置条件 | 测试步骤 | 期望结果 | 优先级 |
|--------|--------|----------|----------|----------|--------|
| TC_MEMO_008 | 进入创建页 | 在列表页 | 点击"+"按钮 | 跳转到备忘录编辑页 | P0 |
| TC_MEMO_009 | 输入标题 | 在编辑页 | 输入标题 | 正确显示输入内容 | P0 |
| TC_MEMO_010 | 标题为空保存 | 在编辑页 | 标题为空点击保存 | 提示"请输入标题" | P0 |
| TC_MEMO_011 | 标题长度限制 | 在编辑页 | 输入超过50字 | 只能输入前50字 | P1 |
| TC_MEMO_012 | 选择日期 | 在编辑页 | 点击日期选择器 | 弹出日期选择器 | P0 |
| TC_MEMO_013 | 选择时间 | 在编辑页 | 点击时间选择器 | 弹出时间选择器 | P0 |
| TC_MEMO_014 | 未选时间保存 | 在编辑页 | 未选日期/时间点击保存 | 提示"请选择提醒时间" | P0 |
| TC_MEMO_015 | 选择优先级 | 在编辑页 | 点击优先级按钮 | 优先级高亮切换（低/中/高） | P1 |
| TC_MEMO_016 | 输入备注 | 在编辑页 | 输入备注内容 | 正确显示，支持多行 | P1 |
| TC_MEMO_017 | 成功创建 | 填写完整信息 | 点击保存 | 1. 保存成功<br>2. 返回列表<br>3. 列表显示新备忘录 | P0 |

### 5.3 编辑备忘录

| 用例ID | 测试项 | 前置条件 | 测试步骤 | 期望结果 | 优先级 |
|--------|--------|----------|----------|----------|--------|
| TC_MEMO_018 | 进入编辑页 | 有备忘录 | 点击某条备忘录 | 1. 跳转到编辑页<br>2. 显示原数据 | P0 |
| TC_MEMO_019 | 修改标题 | 编辑模式 | 修改标题后保存 | 标题正确更新 | P0 |
| TC_MEMO_020 | 修改时间 | 编辑模式 | 修改日期/时间后保存 | 时间正确更新，重新分组 | P0 |
| TC_MEMO_021 | 修改优先级 | 编辑模式 | 修改优先级后保存 | 优先级正确更新 | P1 |
| TC_MEMO_022 | 删除备忘录 | 编辑模式 | 点击删除按钮并确认 | 1. 删除成功<br>2. 返回列表<br>3. 列表不再显示 | P0 |
| TC_MEMO_023 | 取消删除 | 编辑模式 | 点击删除但取消 | 不删除，保持在编辑页 | P1 |

### 5.4 完成备忘录

| 用例ID | 测试项 | 前置条件 | 测试步骤 | 期望结果 | 优先级 |
|--------|--------|----------|----------|----------|--------|
| TC_MEMO_024 | 在列表完成 | 在列表页 | 点击勾选按钮 | 1. 标记为已完成<br>2. 刷新列表 | P0 |
| TC_MEMO_025 | 取消完成 | 已完成的备忘录 | 再次点击勾选按钮 | 取消完成状态 | P0 |
| TC_MEMO_026 | 在首页快速完成 | 首页有待办 | 点击待办的勾选按钮 | 标记为已完成并刷新 | P0 |

---

## 六、设置模块

### 6.1 用户信息

| 用例ID | 测试项 | 前置条件 | 测试步骤 | 期望结果 | 优先级 |
|--------|--------|----------|----------|----------|--------|
| TC_SET_001 | 显示用户信息 | 已登录 | 进入设置页 | 显示头像和昵称 | P0 |
| TC_SET_002 | 头像加载失败 | 头像URL无效 | 进入设置页 | 显示默认头像占位符 | P1 |
| TC_SET_003 | 重新授权 | 已登录 | 点击"重新授权" | 1. 弹出授权窗口<br>2. 更新用户信息 | P1 |

### 6.2 统计数据

| 用例ID | 测试项 | 前置条件 | 测试步骤 | 期望结果 | 优先级 |
|--------|--------|----------|----------|----------|--------|
| TC_SET_004 | 使用天数统计 | 有历史记录 | 查看统计 | 显示从第一条记录到今天的天数 | P1 |
| TC_SET_005 | 总记录数统计 | 有记录 | 查看统计 | 显示总记录条数 | P1 |
| TC_SET_006 | 总时长统计 | 有记录 | 查看统计 | 显示总时长（小时） | P1 |
| TC_SET_007 | 活跃天数统计 | 有记录 | 查看统计 | 显示有记录的天数 | P1 |
| TC_SET_008 | 标签数量统计 | 有标签 | 查看统计 | 显示默认标签+自定义标签总数 | P1 |
| TC_SET_009 | 常用标签Top5 | 有记录 | 查看常用标签 | 显示使用时长最多的前5个标签 | P1 |
| TC_SET_010 | 下拉刷新统计 | 在设置页 | 下拉刷新 | 重新计算并显示统计数据 | P1 |

### 6.3 功能入口

| 用例ID | 测试项 | 前置条件 | 测试步骤 | 期望结果 | 优先级 |
|--------|--------|----------|----------|----------|--------|
| TC_SET_011 | 备忘录管理入口 | 在设置页 | 点击"备忘录管理" | 跳转到备忘录列表 | P0 |
| TC_SET_012 | 标签管理入口 | 在设置页 | 点击"标签管理" | 跳转到标签管理页 | P1 |
| TC_SET_013 | 模板管理入口 | 在设置页 | 点击"模板管理" | 跳转到模板管理页 | P1 |
| TC_SET_014 | 数据统计入口 | 在设置页 | 点击"数据统计" | 跳转到数据统计页 | P1 |

### 6.4 数据管理

| 用例ID | 测试项 | 前置条件 | 测试步骤 | 期望结果 | 优先级 |
|--------|--------|----------|----------|----------|--------|
| TC_SET_015 | 查看缓存大小 | 在设置页 | 查看缓存信息 | 显示当前缓存大小（KB/MB） | P1 |
| TC_SET_016 | 清除缓存 | 在设置页 | 点击"清除缓存"并确认 | 1. 清除本地缓存<br>2. 提示清除成功<br>3. 缓存大小更新 | P1 |
| TC_SET_017 | 取消清除缓存 | 在设置页 | 点击"清除缓存"但取消 | 不清除缓存 | P2 |
| TC_SET_018 | 数据备份 | 在设置页 | 点击"数据备份" | 提示备份功能（当前为TODO） | P2 |

---

## 七、跨天睡眠记录特殊场景

### 7.1 自动拆分睡眠记录

| 用例ID | 测试项 | 前置条件 | 测试步骤 | 期望结果 | 优先级 |
|--------|--------|----------|----------|----------|--------|
| TC_SLEEP_001 | 跨天睡眠拆分 | 昨晚23:00录音"休息" | 今早06:00录音"起床" | 生成3条记录：<br>1. 昨天23:00-00:00 休息<br>2. 今天00:00-06:00 睡觉（自动填充）<br>3. 今天06:00-待定 起床 | P0 |
| TC_SLEEP_002 | 昨天记录归属 | 执行TC_SLEEP_001 | 查看昨天日视图 | 显示"23:00-00:00 休息" | P0 |
| TC_SLEEP_003 | 今天记录归属 | 执行TC_SLEEP_001 | 查看今天日视图 | 显示2条：<br>1. 00:00-06:00 睡觉（自动填充）<br>2. 06:00-待定 起床 | P0 |
| TC_SLEEP_004 | 睡眠关键词识别 | 前一天有记录 | 录音包含"睡觉/睡眠/休息/就寝/入睡/睡/困" | 触发跨天拆分逻辑 | P0 |
| TC_SLEEP_005 | 非睡眠记录不拆分 | 前一天23:00录音"工作" | 今早06:00录音"起床" | 不拆分，前一条记录endTime直接设为06:00 | P0 |
| TC_SLEEP_006 | 自动填充标签继承 | 前一天睡眠记录有标签 | 触发拆分 | 自动填充的记录继承原记录的标签 | P1 |
| TC_SLEEP_007 | 自动填充记录来源 | 触发拆分 | 查看自动填充记录 | source字段为"auto" | P1 |

---

## 八、数据一致性测试

### 8.1 记录时间连续性

| 用例ID | 测试项 | 前置条件 | 测试步骤 | 期望结果 | 优先级 |
|--------|--------|----------|----------|----------|--------|
| TC_DATA_001 | 新建记录更新前一条 | 有记录A（10:00-待定） | 新建记录B（12:00） | 记录A的endTime自动更新为12:00 | P0 |
| TC_DATA_002 | 同一天记录连续 | 某天有多条记录 | 查看该天所有记录 | 每条记录的endTime等于下一条的startTime（最后一条除外） | P0 |
| TC_DATA_003 | 编辑不影响连续性 | 编辑某条记录的时间 | 保存后检查前后记录 | 时间连续性保持不变 | P1 |

### 8.2 日期归属准确性

| 用例ID | 测试项 | 前置条件 | 测试步骤 | 期望结果 | 优先级 |
|--------|--------|----------|----------|----------|--------|
| TC_DATA_004 | startTime决定归属 | 有多条不同日期记录 | 查看各天日视图 | 每条记录显示在startTime对应的日期 | P0 |
| TC_DATA_005 | updateTime不影响归属 | 今天编辑昨天的记录 | 查看今天和昨天日视图 | 记录仍在昨天日视图，不在今天 | P0 |
| TC_DATA_006 | 跨天记录正确截断 | 有23:00-次日01:00记录 | 查看今天日视图 | 显示23:00-23:59，时长标记"+" | P0 |

### 8.3 数据删除和恢复

| 用例ID | 测试项 | 前置条件 | 测试步骤 | 期望结果 | 优先级 |
|--------|--------|----------|----------|----------|--------|
| TC_DATA_007 | 软删除记录 | 删除某条记录 | 查询数据库 | isDeleted字段为true，记录仍存在 | P1 |
| TC_DATA_008 | 删除后不显示 | 删除某条记录 | 查看列表和日视图 | 不显示已删除记录 | P0 |
| TC_DATA_009 | 软删除备忘录 | 删除某条备忘录 | 查询数据库 | isDeleted字段为true | P1 |

---

## 九、异常和边界测试

### 9.1 网络异常

| 用例ID | 测试项 | 前置条件 | 测试步骤 | 期望结果 | 优先级 |
|--------|--------|----------|----------|----------|--------|
| TC_ERR_001 | 无网络加载数据 | 断网 | 进入任何页面 | 提示加载失败或网络错误 | P0 |
| TC_ERR_002 | 无网络保存数据 | 断网 | 保存记录/备忘录 | 提示保存失败 | P0 |
| TC_ERR_003 | 弱网环境 | 网络较慢 | 操作小程序 | 显示加载状态，超时后提示 | P1 |
| TC_ERR_004 | 网络恢复后 | 从断网到恢复 | 重试操作 | 功能正常使用 | P1 |

### 9.2 数据库异常

| 用例ID | 测试项 | 前置条件 | 测试步骤 | 期望结果 | 优先级 |
|--------|--------|----------|----------|----------|--------|
| TC_ERR_005 | 集合不存在 | 首次使用 | 访问数据 | 友好提示，不崩溃 | P1 |
| TC_ERR_006 | 查询失败 | 数据库异常 | 查询数据 | 提示错误，不崩溃 | P1 |
| TC_ERR_007 | 写入失败 | 权限不足 | 保存数据 | 提示保存失败 | P1 |

### 9.3 权限问题

| 用例ID | 测试项 | 前置条件 | 测试步骤 | 期望结果 | 优先级 |
|--------|--------|----------|----------|----------|--------|
| TC_ERR_008 | 未授权录音 | 首次使用 | 点击录音 | 请求权限，拒绝后提示 | P0 |
| TC_ERR_009 | 未授权用户信息 | 首次登录 | 点击登录 | 请求权限或提供手动输入 | P0 |

### 9.4 边界值测试

| 用例ID | 测试项 | 前置条件 | 测试步骤 | 期望结果 | 优先级 |
|--------|--------|----------|----------|----------|--------|
| TC_BOUND_001 | 内容最大长度 | 在编辑页 | 输入500字 | 正确保存，不截断 | P1 |
| TC_BOUND_002 | 昵称最大长度 | 登录页 | 输入20字昵称 | 正确保存 | P1 |
| TC_BOUND_003 | 备忘录标题最大长度 | 备忘录编辑 | 输入50字标题 | 正确保存 | P1 |
| TC_BOUND_004 | 录音最长时长 | 录音中 | 录音60秒 | 自动停止并上传 | P1 |
| TC_BOUND_005 | 零点时间处理 | 记录时间 | 设置00:00时间 | 正确保存和显示 | P0 |
| TC_BOUND_006 | 23:59时间处理 | 记录时间 | 设置23:59时间 | 正确保存和显示 | P0 |
| TC_BOUND_007 | 大量记录加载 | 有100+条记录 | 加载列表 | 正常加载，不卡顿 | P1 |

---

## 十、用户体验测试

### 10.1 界面响应

| 用例ID | 测试项 | 前置条件 | 测试步骤 | 期望结果 | 优先级 |
|--------|--------|----------|----------|----------|--------|
| TC_UX_001 | 页面跳转流畅 | 任何页面 | 点击导航 | 跳转流畅，无明显延迟 | P1 |
| TC_UX_002 | 加载状态提示 | 加载数据中 | 观察界面 | 显示loading提示 | P1 |
| TC_UX_003 | 操作反馈 | 点击按钮 | 观察反馈 | 有点击态或toast提示 | P1 |
| TC_UX_004 | 列表滚动 | 长列表 | 滚动列表 | 滚动流畅，无卡顿 | P1 |

### 10.2 交互设计

| 用例ID | 测试项 | 前置条件 | 测试步骤 | 期望结果 | 优先级 |
|--------|--------|----------|----------|----------|--------|
| TC_UX_005 | 确认框二次确认 | 删除操作 | 点击删除 | 弹出确认框，防止误删 | P0 |
| TC_UX_006 | 返回键处理 | 任何页面 | 点击返回 | 正确返回上一页 | P0 |
| TC_UX_007 | 输入框自动聚焦 | 进入编辑页 | 观察输入框 | 内容框自动聚焦 | P1 |
| TC_UX_008 | 时间选择器默认值 | 打开时间选择器 | 观察默认值 | 显示当前时间 | P1 |

### 10.3 视觉一致性

| 用例ID | 测试项 | 前置条件 | 测试步骤 | 期望结果 | 优先级 |
|--------|--------|----------|----------|----------|--------|
| TC_UX_009 | 主题色统一 | 浏览所有页面 | 观察颜色 | 使用薄荷绿主题色（#B8D4C8） | P1 |
| TC_UX_010 | 字体大小合适 | 浏览所有页面 | 观察文字 | 大小适中，可读性好 | P1 |
| TC_UX_011 | 图标风格统一 | 浏览所有页面 | 观察图标 | 风格一致 | P1 |
| TC_UX_012 | 间距布局合理 | 浏览所有页面 | 观察布局 | 间距合理，不拥挤 | P1 |

---

## 十一、兼容性测试

### 11.1 设备兼容

| 用例ID | 测试项 | 测试设备 | 测试步骤 | 期望结果 | 优先级 |
|--------|--------|----------|----------|----------|--------|
| TC_COM_001 | iPhone测试 | iPhone 12+ | 完整功能测试 | 所有功能正常 | P0 |
| TC_COM_002 | Android测试 | 华为/小米等 | 完整功能测试 | 所有功能正常 | P0 |
| TC_COM_003 | 小屏幕适配 | iPhone SE | 查看界面 | 布局正常，无遮挡 | P1 |
| TC_COM_004 | 大屏幕适配 | iPad | 查看界面 | 布局合理 | P2 |

### 11.2 微信版本兼容

| 用例ID | 测试项 | 测试环境 | 测试步骤 | 期望结果 | 优先级 |
|--------|--------|----------|----------|----------|--------|
| TC_COM_005 | 最新微信版本 | 最新版微信 | 完整功能测试 | 所有功能正常 | P0 |
| TC_COM_006 | 较低微信版本 | 低于推荐版本 | 功能测试 | 提示升级或降级使用 | P1 |

---

## 十二、性能测试

### 12.1 响应时间

| 用例ID | 测试项 | 测试步骤 | 期望结果 | 优先级 |
|--------|--------|----------|----------|--------|
| TC_PERF_001 | 首页加载时间 | 冷启动小程序 | 2秒内显示首页 | P1 |
| TC_PERF_002 | 列表加载时间 | 打开记录列表 | 1秒内显示数据 | P1 |
| TC_PERF_003 | 保存响应时间 | 保存记录 | 1秒内保存完成 | P1 |
| TC_PERF_004 | 录音上传时间 | 60秒录音 | 5秒内上传完成 | P1 |

### 12.2 资源占用

| 用例ID | 测试项 | 测试步骤 | 期望结果 | 优先级 |
|--------|--------|----------|----------|--------|
| TC_PERF_005 | 内存占用 | 长时间使用 | 内存占用合理，无泄漏 | P1 |
| TC_PERF_006 | 本地存储 | 查看缓存大小 | 存储空间合理 | P1 |

---

## 测试优先级说明

- **P0（高）**：核心功能，必须通过，影响主要业务流程
- **P1（中）**：重要功能，应该通过，影响用户体验
- **P2（低）**：次要功能，可以接受，锦上添花

---

## 测试环境要求

### 硬件环境
- iPhone（iOS 14+）
- Android 手机（Android 8.0+）
- 微信开发者工具

### 软件环境
- 微信版本：8.0+
- 小程序基础库：2.2.3+
- 云开发环境：已配置

### 测试数据准备
1. 至少2个测试账号
2. 不同日期的历史记录（至少10条）
3. 不同时间段的记录（覆盖0点、12点、23点等）
4. 带标签和不带标签的记录
5. 有录音和无录音的记录
6. 不同状态的备忘录（未完成/已完成）
7. 跨天的测试数据

---

## 测试报告模板

### 测试执行记录

| 用例ID | 测试结果 | 实际结果 | Bug ID | 测试人 | 测试日期 |
|--------|---------|----------|--------|--------|----------|
| TC_XXX_XXX | 通过/失败 | 描述实际情况 | #001 | 张三 | 2025-11-03 |

### 缺陷等级定义

- **致命缺陷**：系统崩溃、数据丢失、核心功能完全不可用
- **严重缺陷**：主要功能不可用、数据错误
- **一般缺陷**：功能可用但存在问题、用户体验差
- **轻微缺陷**：界面问题、提示不清晰

---

## 测试结论

### 通过标准
- P0用例100%通过
- P1用例≥95%通过
- P2用例≥80%通过
- 无致命和严重缺陷

### 版本发布建议
- ✅ **建议发布**：满足以上标准
- ⚠️ **有条件发布**：P1用例≥90%通过，已知问题有workaround
- ❌ **不建议发布**：未满足通过标准

---

## 附录

### A. 睡眠关键词列表
- 睡觉
- 睡眠
- 休息
- 就寝
- 入睡
- 睡
- 困

### B. 默认标签列表
- 工作 💼 #FF5733
- 学习 📖 #3498DB
- 休息 ☕ #2ECC71
- 通勤 🚇 #9B59B6
- 家庭 🏠 #E74C3C
- 运动 🏃 #F39C12

### C. 时间格式说明
- 日期格式：YYYY-MM-DD
- 时间格式：HH:MM 或 HH:MM:SS
- 日期时间：YYYY-MM-DD HH:MM:SS

---

**文档结束**
