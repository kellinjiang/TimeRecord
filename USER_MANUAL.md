# 📱 时间记录小程序 - 完整用户手册

> **版本：** v1.0.0
> **更新时间：** 2025-11-02
> **适用对象：** 所有用户

---

## 📖 目录

1. [项目介绍](#1-项目介绍)
2. [快速开始](#2-快速开始)
3. [核心功能详解](#3-核心功能详解)
4. [使用指南](#4-使用指南)
5. [常见问题FAQ](#5-常见问题faq)
6. [技术说明](#6-技术说明)
7. [数据安全](#7-数据安全)
8. [更新日志](#8-更新日志)

---

## 1. 项目介绍

### 1.1 什么是时间记录小程序？

**时间记录小程序**是一款轻量级的时间管理工具，通过**录音快速记录**的方式，帮助您记录每天的时间分配，并提供**智能统计分析**功能，让您更好地了解自己的时间使用情况。

### 1.2 核心特点

| 特点 | 说明 |
|-----|------|
| 🎤 **语音快速记录** | 长按录音，快速记录时间片段 |
| ☁️ **云端存储** | 数据自动同步到云端，永不丢失 |
| 🏷️ **标签分类** | 多种标签，轻松分类管理 |
| 📊 **智能统计** | 自动生成日/周/月统计报表 |
| 📝 **模板快填** | 常用模板，一键填充内容 |
| 📈 **数据分析** | 多维度数据分析，洞察时间分配 |

### 1.3 适用场景

- ✅ **时间管理** - 记录每天的时间分配
- ✅ **工作日志** - 快速记录工作进度
- ✅ **学习记录** - 追踪学习时长和内容
- ✅ **生活日记** - 记录生活点滴
- ✅ **项目跟踪** - 追踪项目时间投入

---

## 2. 快速开始

### 2.1 环境准备

#### **必需条件**
- ✅ 已注册微信小程序账号
- ✅ 已安装微信开发者工具
- ✅ 已开通云开发环境

#### **获取必要信息**
- `AppID`：您的小程序AppID（示例：`wx5d14b1b254bd2897`）
- `云环境ID`：您的云开发环境ID（示例：`cloud1-4gghlb7z8c4b3468`）

### 2.2 项目配置

#### **步骤1：打开项目**

1. 启动**微信开发者工具**
2. 点击 **"导入项目"**
3. 选择项目目录：`F:\mcp\claude\TimeRecord`
4. 填写您的AppID
5. 点击 **"导入"**

#### **步骤2：配置云环境ID**

修改文件：`miniprogram/app.js`（第9行）

```javascript
// 修改前
env: '你的云环境ID',

// 修改后
env: 'cloud1-4gghlb7z8c4b3468',  // 替换为您的真实云环境ID
```

#### **步骤3：创建数据库集合**

在云开发控制台创建以下5个集合：

| 集合名称 | 用途 | 权限设置 |
|---------|------|---------|
| `records` | 存储时间记录 | 仅创建者可读写 |
| `summaries` | 存储日/周/月总结 | 仅创建者可读写 |
| `tags` | 存储自定义标签 | 仅创建者可读写 |
| `templates` | 存储自定义模板 | 仅创建者可读写 |
| `users` | 存储用户设置（预留） | 仅创建者可读写 |

#### **步骤4：编译运行**

点击开发者工具顶部的 **"编译"** 按钮，等待编译完成。

✅ **成功标志：**
- 左侧模拟器显示首页
- 可以看到实时时间（时分秒在跳动）
- 中央有一个大的录音按钮
- 底部有4个导航按钮

### 2.3 真机预览

1. 点击顶部工具栏的 **"预览"** 按钮
2. 用手机微信扫描生成的二维码
3. 首次使用会请求录音权限，点击 **"允许"**

---

## 3. 核心功能详解

### 3.1 首页 - 录音记录

#### **功能概述**
首页是时间记录的入口，通过录音快速创建记录。

#### **界面说明**

```
┌─────────────────────────┐
│   时间记录              │  ← 顶部标题栏
├─────────────────────────┤
│   13:45:28              │  ← 实时时钟
│   2025年11月2日         │
│                         │
│      [录音按钮]         │  ← 中央大按钮
│      按住录音           │
│                         │
│   📝 最近记录 (3)       │  ← 最近3条记录
│   ┌─────────────────┐  │
│   │ 工作会议 💼     │  │
│   │ 13:00 - 14:30   │  │
│   └─────────────────┘  │
└─────────────────────────┘
│ 录音 日视图 周视图 我的 │  ← 底部导航栏
└─────────────────────────┘
```

#### **如何录音？**

1. **第一次录音**
   - 点击中央录音按钮
   - 弹出权限请求，点击 **"允许"**
   - 再次点击按钮开始录音

2. **录音中**
   - 按钮显示 **"录音中..."**
   - 顶部提示 **"正在录音..."**
   - 最长可录60秒

3. **停止录音**
   - 再次点击按钮停止录音
   - 自动上传录音到云存储
   - 跳转到编辑页

#### **最近记录**
- 显示最近3条记录
- 点击记录可查看详情
- 无记录时显示空状态提示

### 3.2 记录编辑页

#### **功能概述**
编辑页用于填写记录详情，包括时间、内容、标签等。

#### **界面说明**

```
┌─────────────────────────┐
│ ← 编辑记录              │  ← 标题栏
├─────────────────────────┤
│ ⏰ 开始时间              │
│   14:30                 │  ← 时间选择器
│                         │
│ 📝 记录内容              │
│ ┌─────────────────────┐ │
│ │ 参加团队会议，讨论... │ │  ← 多行文本输入
│ └─────────────────────┘ │
│                   0/500  │  ← 字符计数
│                         │
│ 🏷️ 选择标签              │
│ [💼工作] [📚学习] ...    │  ← 快速标签
│ [+ 更多]                │
│                         │
│ 📋 常用模板              │
│ → [工作日志] [会议...] →│  ← 横向滚动
│                         │
│ ┌─────────┬───────────┐ │
│ │  取消   │   保存    │ │  ← 底部按钮
│ └─────────┴───────────┘ │
└─────────────────────────┘
```

#### **表单项说明**

| 表单项 | 说明 | 操作 |
|-------|------|------|
| **开始时间** | 记录开始时间 | 点击选择时间（默认当前时间） |
| **记录内容** | 文字内容 | 输入或粘贴文本（最多500字） |
| **选择标签** | 分类标签 | 点击快速标签或"更多"查看全部 |
| **常用模板** | 快速填充 | 点击模板自动填充内容 |

#### **标签选择**

**快速标签**（前6个）
- 💼 工作
- 📚 学习
- 🏃 运动
- ☕ 休闲
- 🍔 饮食
- 🚗 通勤

**更多标签**
- 点击 **"+ 更多"** 按钮
- 弹出标签选择弹窗
- 多选标签
- 点击 **"确定"** 保存

#### **常用模板**

**默认模板**
1. **工作日志** - 今天完成了以下工作...
2. **会议记录** - 会议主题：...
3. **学习笔记** - 学习内容：...

**使用模板**
- 横向滑动查看模板
- 点击模板名称
- 确认是否覆盖当前内容
- 自动填充到内容框

#### **保存记录**

1. 填写必填项（内容不能为空）
2. 点击 **"保存"** 按钮
3. 显示 **"保存成功"** 提示
4. 自动返回上一页

### 3.3 日视图

#### **功能概述**
查看某一天的所有记录，以时间轴形式展示。

#### **界面说明**

```
┌─────────────────────────┐
│   日视图                │
├─────────────────────────┤
│ ← 今天 (周六) →        │  ← 日期导航
│                         │
│ 📊 统计                 │
│ 记录数: 5  时长: 6.5h   │
│ 已完成: 4  标签分布     │  ← 统计卡片
│ ▓▓▓░░ [💼工作 60%]     │
│                         │
│ ⏰ 时间轴                │
│ ● 09:00 - 10:30 (1.5h) │
│   早会讨论项目进度      │
│   💼工作                │
│                         │
│ ● 14:00 - 15:00 (1h)   │
│   学习新技术文档        │
│   📚学习                │
│                         │
│ 📝 每日总结              │
│ ┌─────────────────────┐ │
│ │ 今天完成了...        │ │
│ └─────────────────────┘ │
└─────────────────────────┘
```

#### **功能详解**

**日期导航**
- 点击 **"←"** 查看前一天
- 点击 **"→"** 查看后一天
- 不能查看未来日期
- 显示"今天"或具体日期

**统计卡片**
- **记录数** - 当天的总记录条数
- **总时长** - 累计记录时长
- **已完成** - 有结束时间的记录数
- **标签分布** - 可视化显示标签占比

**时间轴**
- 按时间顺序排列
- 显示开始时间、结束时间、时长
- 显示记录内容
- 显示关联标签
- 点击记录可编辑

**每日总结**
- 输入当天总结
- 失焦自动保存
- 支持多行文本（最多500字）

### 3.4 周视图

#### **功能概述**
查看本周的记录统计，以柱状图形式展示趋势。

#### **界面说明**

```
┌─────────────────────────┐
│   周视图                │
├─────────────────────────┤
│ ← 第45周 (11/4-11/10) →│  ← 周导航
│                         │
│ 📊 统计                 │
│ 记录数: 28  时长: 42h   │
│ 日均: 6h                │  ← 周统计
│                         │
│ 📈 每日时长              │
│   ▓                     │
│   ▓  ▓                  │
│   ▓  ▓  ▓  ▓           │  ← 柱状图
│ ─────────────────       │
│  一 二 三 四 五 六 日    │
│                         │
│ 🏷️ 标签统计 (Top 5)     │
│ 💼 工作  18h  ▓▓▓▓░ 43% │
│ 📚 学习  12h  ▓▓▓░░ 28% │
│ ...                     │
│                         │
│ 📝 周总结                │
│ ┌─────────────────────┐ │
│ │ 本周完成了...        │ │
│ └─────────────────────┘ │
└─────────────────────────┘
```

#### **功能详解**

**周导航**
- 点击 **"←"** 查看上一周
- 点击 **"→"** 查看下一周
- 显示周数和日期范围
- 不能查看未来周

**周统计**
- **记录数** - 本周总记录数
- **总时长** - 本周累计时长
- **日均时长** - 平均每天的时长

**每日时长柱状图**
- 7天完整显示（周一到周日）
- 柱子高度代表时长
- 今日绿色高亮
- 点击柱子跳转到对应日视图

**标签统计**
- Top 5标签
- 显示时长和占比
- 彩色进度条可视化

### 3.5 月视图

#### **功能概述**
查看本月的记录统计，以日历和趋势图展示。

#### **界面说明**

```
┌─────────────────────────┐
│   月视图                │
├─────────────────────────┤
│ ← 11月 2025 →          │  ← 月份导航
│                         │
│ 📊 统计                 │
│ 记录数: 120  时长: 180h │
│ 活跃: 25天              │  ← 月统计
│                         │
│ 📅 日历                 │
│ 日 一 二 三 四 五 六    │
│          1  2  3  4  5  │
│  6  7  8  9 10 11 12   │  ← 日历网格
│ 13 14 15 ●16 17 18 19  │  （绿点=有记录）
│ 20 21 22 23 24 25 26   │
│ 27 28 29 30            │
│                         │
│ 📈 周趋势                │
│   ▓  ▓  ▓  ▓           │  ← 按周统计
│ W1 W2 W3 W4 W5         │
│                         │
│ 📝 月总结                │
│ ┌─────────────────────┐ │
│ │ 本月完成了...        │ │
│ └─────────────────────┘ │
└─────────────────────────┘
```

#### **功能详解**

**日历视图**
- 7x6网格显示（42天）
- 包含上月末尾、本月全部、下月开头
- 有记录的日期显示绿色背景
- 今天特殊高亮
- 显示记录数量徽章
- 点击日期跳转到日视图

**周趋势**
- 按周统计时长
- 柱状图展示
- 显示周数和日期范围

**月总结**
- 输入当月总结
- 失焦自动保存
- 支持多行文本（最多1500字）

### 3.6 设置页

#### **功能概述**
管理个人信息、查看数据统计、访问功能管理。

#### **界面说明**

```
┌─────────────────────────┐
│   我的                  │
├─────────────────────────┤
│ ┌─────────────────────┐ │
│ │ [头像] 用户昵称      │ │  ← 用户卡片
│ │ 已使用 120 天        │ │  （绿色渐变）
│ └─────────────────────┘ │
│                         │
│ 📊 数据总览              │
│ ┌────┬────┬────┬────┐  │
│ │ 500│180h│ 90 │ 15 │  │  ← 2x2网格
│ │记录│时长│活跃│标签│  │
│ └────┴────┴────┴────┘  │
│                         │
│ 🏷️ 常用标签 (Top 5)     │
│ 💼 工作  45h            │
│ 📚 学习  32h            │
│ ...                     │
│                         │
│ ⚙️ 功能管理              │
│ → 🏷️ 标签管理  (15)    │  ← 点击进入
│ → 📋 模板管理  (8)     │
│ → 📈 数据统计          │
│                         │
│ 🔧 其他                 │
│ → 💾 数据备份          │
│ → 🧹 清除缓存  (2.5MB) │
│ → ℹ️ 关于我们  v1.0.0  │
└─────────────────────────┘
```

#### **功能详解**

**用户信息卡片**
- 显示微信头像和昵称
- 显示使用天数（从首条记录开始）
- 绿色渐变背景

**数据总览**
- 总记录数
- 总时长
- 活跃天数
- 标签数量

**功能管理**
- **标签管理** - 查看、添加、编辑、删除标签
- **模板管理** - 查看、添加、编辑、删除模板
- **数据统计** - 查看详细的数据分析

### 3.7 标签管理

#### **功能概述**
管理时间记录的分类标签，支持自定义标签。

#### **界面说明**

```
┌─────────────────────────┐
│ ← 标签管理              │
├─────────────────────────┤
│ 💡 管理您的标签...      │  ← 提示卡片
│                         │
│ 默认标签                │
│ ┌─────────────────────┐ │
│ │ 💼  工作             │ │
│ │     使用 45 次  [默认]│ │  ← 默认标签
│ └─────────────────────┘ │
│ ...                     │
│                         │
│ 自定义标签 (5)      [+添加]│
│ ┌─────────────────────┐ │
│ │ 🎯  项目A            │ │
│ │     使用 12 次       │ │  ← 自定义标签
│ │     [编辑] [删除]    │ │
│ └─────────────────────┘ │
└─────────────────────────┘
```

#### **功能详解**

**查看标签**
- 默认标签（系统内置，不可编辑）
- 自定义标签（用户创建，可编辑删除）
- 显示使用次数

**添加标签**
1. 点击右上角 **"+ 添加"** 按钮
2. 输入标签名称（最多10字符）
3. 选择图标（24个可选）
4. 选择颜色（20种可选）
5. 查看预览效果
6. 点击 **"添加"** 保存

**编辑标签**
1. 点击标签的 **"编辑"** 按钮
2. 修改名称、图标或颜色
3. 点击 **"保存"** 更新

**删除标签**
1. 点击标签的 **"删除"** 按钮
2. 确认删除
3. 删除后不影响已有记录

### 3.8 模板管理

#### **功能概述**
管理常用的记录模板，快速填充内容。

#### **界面说明**

```
┌─────────────────────────┐
│ ← 模板管理              │
├─────────────────────────┤
│ 📋 管理您的常用模板...  │  ← 提示卡片
│                         │
│ [全部][工作][生活]...   │  ← 分类筛选
│                         │
│ 默认模板                │
│ ┌─────────────────────┐ │
│ │ 工作日志        [工作]│ │
│ │ 今天完成了...         │ │  ← 默认模板
│ │ 使用 20 次            │ │
│ └─────────────────────┘ │
│                         │
│ 自定义模板 (3)      [+添加]│
│ ┌─────────────────────┐ │
│ │ 日报模板        [工作]│ │
│ │ 完成事项:...          │ │  ← 自定义模板
│ │ 使用 8 次  2025-10-30 │ │
│ │     [编辑] [删除]    │ │
│ └─────────────────────┘ │
└─────────────────────────┘
```

#### **功能详解**

**分类筛选**
- 全部、工作、生活、学习、运动、其他
- 点击分类筛选模板

**添加模板**
1. 点击右上角 **"+ 添加"** 按钮
2. 输入模板名称（最多20字符）
3. 选择分类
4. 输入模板内容（最多500字符，支持多行）
5. 查看预览效果
6. 点击 **"添加"** 保存

**编辑模板**
1. 点击模板的 **"编辑"** 按钮
2. 修改名称、分类或内容
3. 点击 **"保存"** 更新

**删除模板**
1. 点击模板的 **"删除"** 按钮
2. 确认删除

### 3.9 数据统计

#### **功能概述**
多维度数据分析，深入了解时间分配情况。

#### **界面说明**

```
┌─────────────────────────┐
│ ← 数据统计              │
├─────────────────────────┤
│ [今日][本周][本月][全部]│  ← 时间维度
│                         │
│ ┌────┬────┬────┬────┐  │
│ │ 28 │42h │ 6h │ 7  │  │  ← 核心指标
│ │记录│时长│日均│活跃│  │
│ └────┴────┴────┴────┘  │
│                         │
│ 🏷️ 标签分布 (Top 5)     │
│ 💼 工作  18h  ▓▓▓▓░ 43% │
│ 📚 学习  12h  ▓▓▓░░ 28% │
│ ...                     │
│                         │
│ 📈 时间趋势 (过去7天)    │
│   ▓     ▓  ▓           │  ← 柱状图
│   ▓  ▓  ▓  ▓  ▓  ▓  ▓ │
│ 1/1 1/2 1/3 ...        │
│                         │
│ ⏰ 时段分布 (24小时)     │
│ 9:00  ▓▓▓▓░░  5        │
│ 14:00 ▓▓▓▓▓▓  8        │  ← 时段统计
│ ...                     │
│                         │
│ 📊 星期分布              │
│ 周一  12h  ▓▓▓▓▓▓  15条 │
│ 周二   8h  ▓▓▓▓░░  10条 │  ← 星期统计
│ ...                     │
│                         │
│ 💡 数据洞察              │
│ 最活跃的一天: 11月1日   │
│ 最常用标签: 工作        │  ← 智能分析
│ 日均记录数: 4.2条       │
└─────────────────────────┘
```

#### **功能详解**

**时间维度切换**
- 今日、本周、本月、全部
- 点击切换，自动重新计算

**核心指标**
- 记录数、总时长、日均时长、活跃天数

**标签分布**
- Top 5标签统计
- 显示时长和占比
- 彩色进度条

**时间趋势**
- 柱状图展示每日时长
- 今日橙色高亮
- 横向滚动查看

**时段分布**
- 24小时统计
- 只显示有记录的时段
- 蓝色进度条

**星期分布**
- 周一到周日完整显示
- 工作日蓝色、周末橙色
- 显示时长和记录数

**数据洞察**
- 自动提取关键信息
- 最活跃的一天
- 最常用标签
- 日均记录数

---

## 4. 使用指南

### 4.1 日常使用流程

#### **典型的一天使用场景**

```
09:00 录音 → "早会，讨论项目进度"
      ↓
      编辑 → 选择标签[💼工作]
      ↓
      保存

14:00 录音 → "学习新技术文档"
      ↓
      编辑 → 选择标签[📚学习]
      ↓
      保存

18:00 录音 → "健身1小时"
      ↓
      编辑 → 选择标签[🏃运动]
      ↓
      保存

22:00 查看日视图 → 写每日总结
```

### 4.2 最佳实践

#### **记录技巧**

1. **及时记录**
   - ✅ 完成一件事立即录音
   - ✅ 不要积累太多再记录
   - ✅ 保持记录的时效性

2. **清晰描述**
   - ✅ 描述做了什么（而不是怎么做）
   - ✅ 简洁明了（不要太长）
   - ✅ 使用关键词

3. **合理标签**
   - ✅ 选择最主要的1-2个标签
   - ✅ 不要选太多标签
   - ✅ 保持标签体系简单

4. **使用模板**
   - ✅ 创建常用的模板
   - ✅ 固定格式的内容用模板
   - ✅ 节省输入时间

#### **统计分析技巧**

1. **定期回顾**
   - 📅 每天：查看日视图，写每日总结
   - 📅 每周：查看周视图，分析时间分配
   - 📅 每月：查看月视图，总结月度情况

2. **数据洞察**
   - 📊 查看标签分布，了解时间投入
   - 📊 查看时段分布，优化作息时间
   - 📊 查看星期分布，平衡工作生活

3. **持续优化**
   - 🎯 根据数据调整时间安排
   - 🎯 减少低价值活动的时间
   - 🎯 增加高价值活动的时间

### 4.3 进阶技巧

#### **标签体系设计**

**工作场景**
```
💼 工作
  ├─ 📧 邮件沟通
  ├─ 💻 编码开发
  ├─ 📊 会议讨论
  └─ 📝 文档编写
```

**学习场景**
```
📚 学习
  ├─ 📖 阅读书籍
  ├─ 🎓 在线课程
  ├─ ✍️ 做笔记
  └─ 💡 实践练习
```

**生活场景**
```
🏠 生活
  ├─ 🍔 饮食
  ├─ 😴 休息
  ├─ 🏃 运动
  └─ 👨‍👩‍👧‍👦 家庭
```

#### **模板库建设**

**工作模板**
```
日报模板：
今日完成：
1.
2.
3.

明日计划：
1.
2.

遇到问题：
```

**学习模板**
```
学习笔记：
学习主题：
学习时长：
重点内容：
心得体会：
```

**总结模板**
```
周总结：
本周成就：
遇到挑战：
下周目标：
个人成长：
```

---

## 5. 常见问题FAQ

### 5.1 使用问题

#### **Q1: 录音没有反应怎么办？**

A: 请检查以下几点：
1. ✅ 是否授予了录音权限
2. ✅ 是否在真机上测试（模拟器不支持录音）
3. ✅ 手机麦克风是否正常
4. ✅ 微信版本是否为最新

**解决方法：**
- 删除小程序重新进入，重新授权
- 在手机设置中检查微信的麦克风权限

#### **Q2: 数据没有保存怎么办？**

A: 请检查：
1. ✅ 网络连接是否正常
2. ✅ 云开发环境是否正常
3. ✅ 数据库集合是否创建
4. ✅ 是否点击了保存按钮

**解决方法：**
- 在云开发控制台检查数据库
- 查看开发者工具的Console是否有错误

#### **Q3: 时间轴显示不正确？**

A: 可能原因：
1. 记录的开始时间和结束时间设置错误
2. 时区设置问题

**解决方法：**
- 编辑记录，重新设置时间
- 确保时间逻辑正确（开始时间 < 结束时间）

#### **Q4: 标签/模板删除后能恢复吗？**

A:
- ❌ 删除的标签/模板无法恢复（软删除）
- ✅ 已有记录中的标签不受影响
- ✅ 删除前会有二次确认

**建议：**
- 删除前仔细确认
- 重要的标签/模板建议备份

### 5.2 数据问题

#### **Q5: 数据会丢失吗？**

A: 不会。数据存储在微信云开发，具有以下特点：
- ✅ 自动备份
- ✅ 多重容灾
- ✅ 高可用性
- ✅ 只要不主动删除，数据永久保存

#### **Q6: 可以导出数据吗？**

A: 当前版本暂不支持导出，后续版本会添加：
- 📤 导出为Excel
- 📤 导出为PDF
- 📤 导出为JSON

#### **Q7: 数据统计不准确？**

A: 请检查：
1. 记录的时间是否设置正确
2. 是否有未完成的记录（无结束时间）
3. 统计时间范围是否正确

**解决方法：**
- 编辑记录，补充结束时间
- 切换不同时间维度查看

### 5.3 性能问题

#### **Q8: 小程序运行卡顿？**

A: 可能原因：
1. 数据量过大
2. 网络较慢
3. 手机性能较低

**解决方法：**
- 清除缓存（设置 → 清除缓存）
- 关闭其他小程序
- 检查网络连接

#### **Q9: 加载很慢？**

A: 优化建议：
1. 使用下拉刷新而不是频繁进出页面
2. 避免在弱网环境下使用
3. 等待数据加载完成后再操作

---

## 6. 技术说明

### 6.1 技术架构

#### **前端技术栈**
- 微信小程序原生框架
- WXML + WXSS + JavaScript

#### **后端技术栈**
- 微信云开发
- 云数据库（MongoDB）
- 云存储
- 云函数（可选）

#### **数据库设计**

**records 集合**（时间记录）
```javascript
{
  _id: "记录ID",
  _openid: "用户openid",
  content: "记录内容",
  audioPath: "录音文件云存储路径",
  startTime: Date,
  endTime: Date,
  duration: Number,  // 分钟
  tags: [{name, icon, color}],
  createTime: Date,
  updateTime: Date,
  isDeleted: Boolean
}
```

**summaries 集合**（总结）
```javascript
{
  _id: "总结ID",
  _openid: "用户openid",
  type: "daily|weekly|monthly",
  date: "YYYY-MM-DD",
  content: "总结内容",
  stats: Object,  // 统计数据快照
  createTime: Date,
  updateTime: Date
}
```

**tags 集合**（自定义标签）
```javascript
{
  _id: "标签ID",
  _openid: "用户openid",
  name: "标签名称",
  icon: "📌",
  color: "#1AAD19",
  createTime: Date,
  updateTime: Date,
  isDeleted: Boolean
}
```

**templates 集合**（自定义模板）
```javascript
{
  _id: "模板ID",
  _openid: "用户openid",
  name: "模板名称",
  category: "工作|生活|学习|运动|其他",
  content: "模板内容",
  createTime: Date,
  updateTime: Date,
  isDeleted: Boolean
}
```

### 6.2 云开发配置

#### **环境配置**
```javascript
// miniprogram/app.js
wx.cloud.init({
  env: 'your-env-id',  // 云环境ID
  traceUser: true
})
```

#### **权限设置**
- 所有集合：**仅创建者可读写**
- 云存储：**仅创建者可读写**

#### **云存储结构**
```
cloud://
└── voice/
    ├── voice_1699012345678.mp3
    ├── voice_1699012456789.mp3
    └── ...
```

### 6.3 性能优化

#### **已实现的优化**
1. ✅ 数据分页加载（限制每次查询数量）
2. ✅ 图片懒加载
3. ✅ 下拉刷新代替频繁重新加载
4. ✅ 使用数据库索引（startTime字段）
5. ✅ 软删除而非物理删除

#### **建议优化**
1. 🔄 添加本地缓存
2. 🔄 实现虚拟列表（长列表场景）
3. 🔄 图表数据缓存
4. 🔄 离线模式支持

---

## 7. 数据安全

### 7.1 隐私保护

#### **数据归属**
- ✅ 所有数据属于用户个人
- ✅ 仅用户本人可访问
- ✅ 云开发自动隔离不同用户数据

#### **权限控制**
- ✅ 使用微信openid标识用户
- ✅ 数据库权限设置为"仅创建者可读写"
- ✅ 云存储权限设置为"仅创建者可读写"

### 7.2 数据备份

#### **自动备份**
- 微信云开发提供自动备份功能
- 数据多地域存储
- 高可用性保障

#### **手动备份**（待实现）
- 导出数据为JSON格式
- 本地保存或云盘保存

### 7.3 数据恢复

#### **软删除机制**
- 删除操作只标记`isDeleted=true`
- 数据仍保留在数据库
- 必要时可通过数据库控制台恢复

---

## 8. 更新日志

### v1.0.0 (2025-11-02)

#### ✅ 已完成功能

**核心功能**
- [x] 录音功能（录音、云存储上传）
- [x] 记录编辑（新建、编辑、保存）
- [x] 日视图（时间轴、统计、每日总结）
- [x] 周视图（柱状图、统计、周总结）
- [x] 月视图（日历、趋势、月总结）

**管理功能**
- [x] 标签管理（增删改查、使用统计）
- [x] 模板管理（增删改查、分类筛选）
- [x] 数据统计（多维度、丰富图表）

**基础功能**
- [x] 用户设置（信息展示、数据总览）
- [x] 下拉刷新
- [x] 数据缓存
- [x] 错误处理

#### 🚀 待开发功能

**增强功能**
- [ ] 语音识别（自动转文字）
- [ ] 数据导出（Excel/PDF）
- [ ] 数据备份与恢复
- [ ] 提醒功能（记录提醒）

**扩展功能**
- [ ] 多人协作
- [ ] 数据分享
- [ ] 主题切换
- [ ] 更多图表类型

---

## 📞 技术支持

### 问题反馈

如遇到问题，请提供以下信息：
1. 问题描述
2. 操作步骤
3. 截图或错误信息
4. 手机型号和微信版本

### 文档反馈

如有文档改进建议，欢迎反馈。

---

## 📄 附录

### A. 快捷键（开发者工具）

| 快捷键 | 功能 |
|-------|------|
| Ctrl + S | 保存文件 |
| Ctrl + Shift + F | 全局搜索 |
| Ctrl + P | 快速打开文件 |
| Ctrl + / | 注释/取消注释 |

### B. 错误代码

| 错误代码 | 说明 | 解决方法 |
|---------|------|---------|
| -1 | 系统错误 | 重试或联系技术支持 |
| -501001 | 数据库权限不足 | 检查集合权限设置 |
| -502001 | 云存储权限不足 | 检查云存储权限设置 |

### C. 相关资源

- [微信小程序官方文档](https://developers.weixin.qq.com/miniprogram/dev/framework/)
- [微信云开发文档](https://developers.weixin.qq.com/miniprogram/dev/wxcloud/basis/getting-started.html)

---

**📱 时间记录小程序 v1.0.0**
**© 2025 TimeRecord | 让时间管理更简单**
