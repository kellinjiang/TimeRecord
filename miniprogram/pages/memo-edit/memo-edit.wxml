<!--pages/memo-edit/memo-edit.wxml-->
<view class="container">
  <scroll-view class="form-scroll" scroll-y>
    <!-- æ ‡é¢˜ -->
    <view class="form-section">
      <view class="section-label">
        <text class="label-text">æ ‡é¢˜</text>
        <text class="required">*</text>
      </view>
      <input
        class="input-field"
        type="text"
        placeholder="è¯·è¾“å…¥å¤‡å¿˜å½•æ ‡é¢˜"
        value="{{formData.title}}"
        bindinput="onTitleInput"
        maxlength="50"
      />
    </view>

    <!-- æé†’æ—¶é—´ -->
    <view class="form-section">
      <view class="section-label">
        <text class="label-text">æé†’æ—¶é—´</text>
        <text class="required">*</text>
      </view>
      <view class="time-picker-row">
        <picker
          mode="date"
          value="{{formData.reminderDate}}"
          start="{{todayDate}}"
          bindchange="onDateChange"
        >
          <view class="picker-field">
            <text class="picker-text">{{formData.reminderDate || 'é€‰æ‹©æ—¥æœŸ'}}</text>
            <text class="picker-arrow">â€º</text>
          </view>
        </picker>
        <picker
          mode="time"
          value="{{formData.reminderTimeStr}}"
          bindchange="onTimeChange"
        >
          <view class="picker-field">
            <text class="picker-text">{{formData.reminderTimeStr || 'é€‰æ‹©æ—¶é—´'}}</text>
            <text class="picker-arrow">â€º</text>
          </view>
        </picker>
      </view>
    </view>

    <!-- ä¼˜å…ˆçº§ -->
    <view class="form-section">
      <view class="section-label">
        <text class="label-text">ä¼˜å…ˆçº§</text>
      </view>
      <view class="priority-buttons">
        <view
          class="priority-btn priority-1 {{formData.priority === 1 ? 'active' : ''}}"
          bindtap="onPriorityChange"
          data-priority="1"
        >
          <text>ä½</text>
        </view>
        <view
          class="priority-btn priority-2 {{formData.priority === 2 ? 'active' : ''}}"
          bindtap="onPriorityChange"
          data-priority="2"
        >
          <text>ä¸­</text>
        </view>
        <view
          class="priority-btn priority-3 {{formData.priority === 3 ? 'active' : ''}}"
          bindtap="onPriorityChange"
          data-priority="3"
        >
          <text>é«˜</text>
        </view>
      </view>
    </view>

    <!-- å¤‡æ³¨ -->
    <view class="form-section">
      <view class="section-label">
        <text class="label-text">å¤‡æ³¨</text>
        <text class="optional">(å¯é€‰)</text>
      </view>
      <textarea
        class="textarea-field"
        placeholder="æ·»åŠ è¯¦ç»†è¯´æ˜..."
        value="{{formData.content}}"
        bindinput="onContentInput"
        maxlength="200"
        auto-height
      />
      <view class="char-count">{{formData.content.length}}/200</view>
    </view>

    <!-- åº•éƒ¨å ä½ -->
    <view style="height: 120rpx;"></view>
  </scroll-view>

  <!-- åº•éƒ¨æ“ä½œæ  -->
  <view class="bottom-bar">
    <button class="cancel-btn" bindtap="cancel">å–æ¶ˆ</button>
    <button
      class="save-btn"
      bindtap="saveMemo"
      disabled="{{!canSave}}"
    >
      {{memoId ? 'æ›´æ–°' : 'ä¿å­˜'}}
    </button>
  </view>

  <!-- åˆ é™¤æŒ‰é’®ï¼ˆä»…ç¼–è¾‘æ—¶æ˜¾ç¤ºï¼‰ -->
  <view class="delete-section" wx:if="{{memoId}}">
    <button class="delete-btn" bindtap="deleteMemo">
      <text>ğŸ—‘ï¸ åˆ é™¤å¤‡å¿˜å½•</text>
    </button>
  </view>
</view>
